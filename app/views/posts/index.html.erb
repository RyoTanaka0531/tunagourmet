<div class="container">
    <div class="error">
        <% if @post.errors.any? %>
        <div id="error_explanation">
            <h3><%= pluralize(@post.errors.count, "error")  %> prohibited this obj being saved:</h3>
            <ul>
                <%= @post.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                <% end %>
            </ul>
        </div>
        <% end %>
    </div>
    <h3>投稿する</h3>
    <%= form_for(@post) do |f| %>
        <%= f.label "題名" %>
        <%= f.text_field :heading %><br>
        <%= f.label "本文" %>
        <%= f.text_field :content %>
        <%= f.label "画像を載せる" %>
        <%= f.attachment_field :image %>
        <%= f.submit "登録" %>
    <% end %>
    <h3>投稿一覧</h3>
    <ul>
    <% @posts.each do |post| %>
        <li>
            <h3><%= link_to post.heading, post_path(post) %></h3>
            <p><%= post.content %></p>
            <% if post.buyer %>
                <%= link_to post.buyer.company_name, buyer_path(post.buyer) %>
            <% else %>
                <%= link_to post.producer.company_name, producer_path(post.producer) %>
            <% end %>
        </li>
    <% end %>
    </ul>
</div>
